from summarizer_fast import summarize
import time

if __name__ == "__main__":
    # 테스트용 긴 텍스트
    long_text = """
    최근 환율을 비롯한 각종 대외 변수로 코스피지수 변동성이 극대화된 가운데 한국의 개인투자자들이 장밋빛 전망을 믿고 빚까지 내 투자에 나서자 주요 외신들도 이를 불안하게 바라보고 있다. 글로벌 '큰손'들이 집결한 미국에서 악재가 발생해도 개인들의 매수로 지수 하락을 방어하는 형국이라 위험도가 더 높아졌다는 진단도 나온다. 특히 최근 한국의 주식 투자 열풍이 집값 급등과 연관돼 있다고 보는 외신도 나오고 있어 눈길을 끌고 있다. 정부의 부동산 대책이 잇따라 실패하고 집값이 천정부지로 치솟자 상대적 박탈감을 느끼고 이를 따라잡기 위한 사람들이 무리수를 두는 게 아니냐는 시각이다. 미국에서 코스피시장에 대한 불안 심리가 확산할수록 증시 수급에는 도움이 되지 않을 수도 있어 월가의 이같은 부정적 인식에 당분간 주목해야 할 것으로 보인다. 여기에 한국 투자자들이 몰리는 미국 주식의 변동성이 최근 급격하게 커지는 데 대해서도 월가에 좋지 않은 시선이 늘고 있는 분위기다. 자칫 월가 투자자들이 한국 개인이 투자한 주식을 위험 종목으로 분류하고 외면할 수도 있음을 감안해야 할 수 있다는 뜻이다.
    블룼버그통신은 지난 12일(현지 시간) 최근 코스피시장에 대해 "한국 주식 변동에 대한 베팅이 급증하면서 올해 가장 좋은 성과를 거둔 시장의 랠리에 대한 우려가 커지고 있다"고 분석했다. 블룼버그통신은 "코스피200 변동성지수가 도널드 트럼프 미국 대통령의 관세로 촉발된 4월 시장 침체 당시 수준으로 뛰어올랐다"며 "이는 다른 시장은 상대적으로 평온한 상태에서 드물게 벗어난 급등 현상"이라고 지적했다. 이어 "올해 코스피는 1999년 이후 가장 큰 73%의 연간 상승폭을 기록하며 전 세계 다른 모든 지표를 능가하고 있다. 코스피200 지수는 삼성전자(005930)와 SK하이닉스(000660)와 같은 반도체주 덕분에 85%로 더 많이 상승했다"며 "코스피 변동성지수(VKOSPI)와 미국 시카고옵션거래소(CBOE) 변동성지수(VIX) 간 격차가 2004년 이후 최대로 벌어졌다"고 덧붙였다.

VIX는 향후 30일간 스탠더드앤드푸어스(S&P)500지수의 변동성에 대한 시장 기대를 반영한 지수로 '공포 지수'라고도 불린다. 실제 CNBC에 따르면 VKOSPI는 지난 7일 41.88을 기록해 트럼프 대통령의 상호관세 발표로 시장이 급락했던 4월 수준으로 올랐다. 이 지수는 상호관세 발표 직후인 올 4월 7일 44.23까지 치솟았다가 이후에는 10%대 후반~20%대 중반에 머물렀다. 그러다 최근 코스피지수가 다시 급등하면서 지난달 중순부터 30%대로 치솟았다.

전균 삼성증권 파생상품 연구원은 블룼버그통신을 통해 "코스피가 사상 최고치를 기록한 데 따른 투자자들의 불안 심리가 VKOSPI에 반영됐다"면서도 시장 조정이 임박했다는 의미는 아니라고 주장했다. 그러면서 "랠리에 대한 기대가 과도하게 커졌고 콜옵션(매수할 권리)이 과대평가된 것으로 보인다"고 진단했다.

블룼버그통신에 따르면 외국인투자가들은 인공지능(AI) 관련주 '거품론'으로 코스피가 단기 침체를 겪자 한국 보유 자산을 조정하기 시작했다. 지난주 코스피가 3.7% 하락하며 4월 이후 가장 큰 하락폭을 기록한 데 따라 1조 6500억 원(약 11억 달러) 상당의 선물을 매도했다. 블룼버그는 자체 자료를 인용해 콜옵션과 풋옵션의 가격이 모두 상승했다면서도 이 가운데 코스피200의 10% 이상 상승에 베팅하는 1개월 만기 콜옵션의 내재 변동성이 최근 1년 평균치를 웃돌고 있다고 보도했다.

파생상품 업체 클리프턴 디리버티브의 존 레이 파생상품·변동성 전문가는 최근 '스마트카르마'에 글을 올리고 "코스피 랠리에 피로의 징후가 보인다"며 "위험을 피하려면 헤지(위험 분산) 옵션을 이용하라"고 권고했다. 스마트카르마는 전 세계 투자 분석가와 기관 투자자를 연결하는 AI 기반 투자 플랫폼이다.
    """ * 2  # 일부러 길게 만들기

    print("=" * 60)
    print("Fast 모델 테스트")
    print("=" * 60)
    print(f"\n원문 길이: {len(long_text)} 글자")
    
    print("\n" + "-" * 60)
    print("요약 시작 (Fast 모델 - Greedy Decoding)")
    print("-" * 60)
    
    start_time = time.time()
    summary = summarize(long_text, chunk_chars=1500, max_len=300)
    elapsed_time = time.time() - start_time
    
    print(f"\n요약 결과:")
    print(summary)
    print(f"\n요약 길이: {len(summary)} 글자")
    print(f"소요 시간: {elapsed_time:.2f}초")
    print(f"처리 속도: {len(long_text) / elapsed_time:.0f} 글자/초")
    
    print("\n" + "=" * 60)
    print("테스트 완료!")
    print("=" * 60)

