"""
Fast 모델 테스트 스크립트
사용법: python test_fast_model.py
"""
from src.summarizer_fast import summarize
import time

def test_fast_model():
    """Fast 모델을 테스트하는 함수"""
    
    print("=" * 70)
    print("Fast 모델 테스트")
    print("=" * 70)
    
    # 테스트 케이스 1: 짧은 텍스트
    print("\n[테스트 1] 짧은 텍스트 요약")
    print("-" * 70)
    text1 = """
    인공지능 기술이 빠르게 발전하면서 다양한 산업 분야에서 활용되고 있다. 
    특히 자연어 처리 분야에서는 대규모 언어 모델이 등장하여 기계 번역, 요약, 질의응답 등의 작업에서 뛰어난 성능을 보이고 있다. 
    이러한 기술 발전은 앞으로 더욱 가속화될 것으로 예상되며, 우리의 일상생활에도 큰 변화를 가져올 것이다.
    """
    
    print(f"원문 길이: {len(text1)} 글자")
    start = time.time()
    summary1 = summarize(text1)
    elapsed1 = time.time() - start
    
    print(f"\n요약 결과:")
    print(f"  {summary1}")
    print(f"\n소요 시간: {elapsed1:.2f}초")
    print(f"처리 속도: {len(text1) / elapsed1:.0f} 글자/초")
    
    # 테스트 케이스 2: 중간 길이 텍스트
    print("\n\n[테스트 2] 중간 길이 텍스트 요약")
    print("-" * 70)
    text2 = """
    최근 코로나19 팬데믹으로 인해 전 세계 경제가 큰 타격을 받았다. 
    많은 기업들이 문을 닫았고, 수많은 사람들이 일자리를 잃었다. 
    정부들은 경제 회복을 위해 다양한 정책을 시행하고 있으며, 특히 중소기업 지원과 고용 안정에 중점을 두고 있다. 
    또한 디지털 전환을 가속화하여 새로운 성장 동력을 찾으려는 노력도 계속되고 있다. 
    이러한 노력들이 결실을 맺어 경제가 점차 회복세를 보이고 있지만, 여전히 많은 도전 과제가 남아있다.
    """
    
    print(f"원문 길이: {len(text2)} 글자")
    start = time.time()
    summary2 = summarize(text2)
    elapsed2 = time.time() - start
    
    print(f"\n요약 결과:")
    print(f"  {summary2}")
    print(f"\n소요 시간: {elapsed2:.2f}초")
    print(f"처리 속도: {len(text2) / elapsed2:.0f} 글자/초")
    
    # 테스트 케이스 3: 긴 텍스트
    print("\n\n[테스트 3] 긴 텍스트 요약")
    print("-" * 70)
    text3 = """
    최근 환율을 비롯한 각종 대외 변수로 코스피지수 변동성이 극대화된 가운데 한국의 개인투자자들이 장밋빛 전망을 믿고 빚까지 내 투자에 나서자 주요 외신들도 이를 불안하게 바라보고 있다. 
    글로벌 '큰손'들이 집결한 미국에서 악재가 발생해도 개인들의 매수로 지수 하락을 방어하는 형국이라 위험도가 더 높아졌다는 진단도 나온다. 
    특히 최근 한국의 주식 투자 열풍이 집값 급등과 연관돼 있다고 보는 외신도 나오고 있어 눈길을 끌고 있다. 
    정부의 부동산 대책이 잇따라 실패하고 집값이 천정부지로 치솟자 상대적 박탈감을 느끼고 이를 따라잡기 위한 사람들이 무리수를 두는 게 아니냐는 시각이다. 
    미국에서 코스피시장에 대한 불안 심리가 확산할수록 증시 수급에는 도움이 되지 않을 수도 있어 월가의 이같은 부정적 인식에 당분간 주목해야 할 것으로 보인다. 
    여기에 한국 투자자들이 몰리는 미국 주식의 변동성이 최근 급격하게 커지는 데 대해서도 월가에 좋지 않은 시선이 늘고 있는 분위기다. 
    자칫 월가 투자자들이 한국 개인이 투자한 주식을 위험 종목으로 분류하고 외면할 수도 있음을 감안해야 할 수 있다는 뜻이다.
    블룼버그통신은 지난 12일(현지 시간) 최근 코스피시장에 대해 "한국 주식 변동에 대한 베팅이 급증하면서 올해 가장 좋은 성과를 거둔 시장의 랠리에 대한 우려가 커지고 있다"고 분석했다. 
    블룼버그통신은 "코스피200 변동성지수가 도널드 트럼프 미국 대통령의 관세로 촉발된 4월 시장 침체 당시 수준으로 뛰어올랐다"며 "이는 다른 시장은 상대적으로 평온한 상태에서 드물게 벗어난 급등 현상"이라고 지적했다. 
    이어 "올해 코스피는 1999년 이후 가장 큰 73%의 연간 상승폭을 기록하며 전 세계 다른 모든 지표를 능가하고 있다. 
    코스피200 지수는 삼성전자(005930)와 SK하이닉스(000660)와 같은 반도체주 덕분에 85%로 더 많이 상승했다"며 "코스피 변동성지수(VKOSPI)와 미국 시카고옵션거래소(CBOE) 변동성지수(VIX) 간 격차가 2004년 이후 최대로 벌어졌다"고 덧붙였다.
    VIX는 향후 30일간 스탠더드앤드푸어스(S&P)500지수의 변동성에 대한 시장 기대를 반영한 지수로 '공포 지수'라고도 불린다. 
    실제 CNBC에 따르면 VKOSPI는 지난 7일 41.88을 기록해 트럼프 대통령의 상호관세 발표로 시장이 급락했던 4월 수준으로 올랐다. 
    이 지수는 상호관세 발표 직후인 올 4월 7일 44.23까지 치솟았다가 이후에는 10%대 후반~20%대 중반에 머물렀다. 
    그러다 최근 코스피지수가 다시 급등하면서 지난달 중순부터 30%대로 치솟았다.
    """
    
    print(f"원문 길이: {len(text3)} 글자")
    start = time.time()
    summary3 = summarize(text3)
    elapsed3 = time.time() - start
    
    print(f"\n요약 결과:")
    print(f"  {summary3}")
    print(f"\n소요 시간: {elapsed3:.2f}초")
    print(f"처리 속도: {len(text3) / elapsed3:.0f} 글자/초")
    
    # 성능 요약
    print("\n\n" + "=" * 70)
    print("성능 요약")
    print("=" * 70)
    print(f"짧은 텍스트:   {elapsed1:.2f}초")
    print(f"중간 텍스트:   {elapsed2:.2f}초")
    print(f"긴 텍스트:     {elapsed3:.2f}초")
    print("=" * 70)
    print("\n테스트 완료!")


if __name__ == "__main__":
    try:
        test_fast_model()
    except Exception as e:
        print(f"\n오류 발생: {e}")
        print("\nFast 모델이 제대로 학습되었는지 확인해주세요.")
        print("모델 경로: models/kosum-v1-fast")

